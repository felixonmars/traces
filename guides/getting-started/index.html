<!DOCTYPE html>
<html>
	<head>
		
			<title>Getting Started</title>
		
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		
		<link rel="icon" type="image/png" href="../../_static/icon.png"/>
		<link rel="stylesheet" href="../../_static/site.css" type="text/css" media="screen"/>
		
		<script src="../../_components/jquery/jquery.min.js"></script>
		<script src="../../_components/jquery-syntax/jquery.syntax.min.js"></script>
		
		<script src="../../_static/links.js"></script>
		
		<script type="text/javascript">
		//<![CDATA[
			jQuery(function($) {
				$.syntax();
			});
		//]]>
		</script>
	</head>

	<body>
		<header> › <a class="link" href="../../index.html">Project</a> › <a class="link" href="../index.html">Guides</a></header>
		
		<main>
			
	<h1>Getting Started</h1>
	
	<p>This guide explains how to use <code>traces</code> for tracing code execution.</p>
<section id="installation"><h2>Installation</h2>
<p>Add the gem to your project:</p>
<pre><code class="language-bash">$ bundle add traces
</code></pre>
</section><section id="core-concepts"><h2>Core Concepts</h2>
<p><code>traces</code> has several core concepts:</p>
<ul>
<li>A <code class="language-ruby">Trace::Provider</code> which implements custom logic for wrapping existing code in traces.</li>
<li>A <code class="language-ruby">Trace::Context</code> which represents the current tracing environment which can include distributed tracing.</li>
</ul>
</section><section id="usage"><h2>Usage</h2>
<p>There are two main aspects to integrating within this gem.</p>
<ol>
<li>Libraries and applications must provide traces.</li>
<li>Those traces must be consumed or emitted somewhere.</li>
</ol>
</section><section id="providing-traces"><h3>Providing Traces</h3>
<p>Adding tracing to libraries requires the use of <code class="language-ruby">Trace::Provider</code>:</p>
<pre><code class="language-ruby">require 'traces'

class MyClass
	def my_method
		puts &quot;Hello World&quot;
	end
end

# If tracing is disabled, this is a no-op.
Traces::Provider(MyClass) do
	def my_method
		attributes = {
			'foo' =&gt; 'bar'
		}
		
		trace('my_method', attributes: attributes) do
			super
		end
	end
end

MyClass.new.my_method
</code></pre>
<p>This code by itself will not create any traces. In order to execute it and output traces, you must set up a consumer.</p>
</section><section id="consuming-traces"><h3>Consuming Traces</h3>
<p>Consuming traces means proving a backend implementation which can emit those traces to some log or service. There are several options, but two backends are included by default:</p>
<ul>
<li><code>traces/backend/test</code> does not emit any traces, but validates the usage of the tracing interface.</li>
<li><code>traces/backend/console</code> emits traces using the <a href="https://github.com/socketry/console"><code>console</code></a> gem.</li>
</ul>
<p>In order to use a specific backend, set the <code>TRACES_BACKEND</code> environment variable, e.g.</p>
<pre><code class="language-shell">$ TRACES_BACKEND=traces/backend/console ./my_script.rb
</code></pre>
<p>Separate implementations are provided for specific APMs:</p>
<ul>
<li><a href="https://github.com/socketry/traces-backend-open_telemetry">OpenTelemetry</a></li>
<li><a href="https://github.com/socketry/traces-backend-datadog">Datadog</a></li>
</ul>
</section>
				
			<footer>Documentation generated by <a href="https://github.com/socketry/utopia-project">Utopia::Project</a>.</footer>
		</main>
	</body>
</html>